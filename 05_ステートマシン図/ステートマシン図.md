# ステートマシン図

## ステートマシン図の概要
  * オブジェクトの状態とは
    * オブジェクトはデータ（属性）と振る舞い（操作）と状態を持つ。たとえば、エアコンの設定温度を考えた場合、次の3つの状態が考えられる。
      * エアコンの設定温度が実際の温度より高いとき
      * エアコンの設定温度と実際の温度が同じとき
      * エアコンの設定温度が実際の温度より低いとき

    * ステートマシン図は複雑な状態を持ったクラスについてのみ作成する。（ビジネス系ではあまり必要性を感じないかもしれないが、組み込み系では必須。

## ステートマシン図とは
  * 相互作用図では、ライフライン同士におけるメッセージやり取りで、システムの動的な振舞いを表現してきた。それに対してステートマシン図では、1つのオブジェクトが生成から消滅までに、時間の経過に伴って変化する状態について表現する。

  * さきほどのエアコンの設定温度をステートマシン図で考えると、「設定温度が実際の温度より高い状態」、「設定温度と実際の温度が同じ状態」、「設定温度が実際の温度より低い状態」の3つの状態があり、そのトリガによって変わることを表現している。

  * ![statemachine_01](src/statemachine_01.png)


## 状態
  * オブジェクトの生成から消滅までの中で、ある一定時間とどまる状況のことを、状態という。状態は丸い長方形で表現し、その中に状態名を記述する。

  * ![statemachine_02](src/statemachine_02.png)

## 開始状態
  * 開始状態はステートマシン図の開始時点（オブジェクト生成時）を示す特別な状態。図中では黒丸で表現する。

  * 開始状態はコンポジット状態の開始時点で示す特別な状態でもある。

    * ![statemachine_03](src/statemachine_03.png)

  * コンポジットの状態がない限り開始状態は一つだけ表記する。終了状態は必用な数だけいくらでも記入できる。

    * ![statemachine_04](src/statemachine_04.png)

## 終了状態
  * 終了状態はステートマシン図の終了時点（オブジェクト消滅時）、または状態が階層化されているときに、そのレベルの終了時点を示す特別な状態。図中では中の丸を塗りつぶした2重丸で表記する。 

  * ![statemachine_05](src/statemachine_05.png)

## トリガ
  * トリガはある状態に対し、何らかの影響をもたらす事象の発生のこと。

  * 次の例は、洗濯機の状態の一部で、「注水」の状態から「満水」というトリガが発生すると、「洗濯」状態になる。

  * ![statemachine_06](src/statemachine_06.png)

## 状態遷移
  * 「注水」の状態から「洗濯」の状態に変わったようにある状態からある状態へ変わることを、状態遷移という。

  * ![statemachine_07](src/statemachine_07.png)

## 自己遷移
  * 自分自身の状態に入りなおすことを自己遷移という。

  * ![statemachine_08](src/statemachine_08.png)
