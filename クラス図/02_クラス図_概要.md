# 02_クラス図_概要

## 図の目的
  * クラスの情報やクラス間の関係から、システムの**静的な**構成を見えるようにする。

* 使用する工程
  * 分析、アーキテクチャ設計、詳細設計、実装、テスト

* クラス図とは
  * オブジェクトの情報を抽象的に定義した図。クラスとオブジェクトには型と実体の関係がある。
  * クラスの情報やクラス間の関係からシステムの静的な構成を表現する。
  * システムを実現するにあたり、システムの"動的な構成"と"静的な構成"どちらも重要だが、クラス図は静的な構成を表し、プログラミングにも密接に関わる。

  * | クラス（型） | オブジェクト（実態） |
    | :- | :- | 
    | 社員 | 鈴木、佐藤 |
    | 部署 | 開発部、人事部 |

## 「クラス」の表記法

   ![class_1](src/class_1.png)


## 可視性

| 記号 | 表現 | 意味 |
| - | - | - |
| + | public | すべてのクラスからアクセス可能 |
| - | private | 自クラスからのみアクセス可能 |
| # | protected | 同一パッケージと継承されているクラスからアクセス可能 |
|~ | package | 同一パッケージ内のクラスからアクセス可能 |


## 関連

2つのクラスが以下の関係にあるとき、関連として表す。
* 一方のクラスがもう一方のクラスのデータを属性（フィールド）として保持する。
    ```
    class A
    {
        private B;
    }
    ``` 
* 一方のクラスがもう一方のクラスの操作（メソッド）を呼び出す。
    ```
    class A
    {
        private int value;

        public int getSumValue(B b)
        {
            return b.getValue + this.value; ←Aクラス内でBのメソッドを呼び出している。
        }

    }
    
    class B
    {
        private int value

        public int getValue()
        {
            return this.value;
        }
    }
    ```

* 関連の表現はクラス間を実線で結び、実線の中央に「関連名」を配置する。
  * ※ あるクラスがもう一方のクラスとの間で複数の関係を持っている場合、その一部だけに注目して関連名を定義してしまうと、システム全体としての関連を表現できていない事になるため、一つの関係だけではなくシステム全体から見て名称を定義することが重要

    　![class_02](src/class_2.png)


## 誘導可能性

* 関連は通常の場合、双方向性を持っているが、オブジェクト間のやりとりがあきらかに一方通行の場合は関連に「矢印」と「×」をつけることで関連の方向性を明確にする。

  ![class_3](src/class_3.png)

## 多重度

  * 関連のあるクラス間において、一方のクラスからもう一方のクラスを見た時に存在しうる数値を多重度として表す。
  
  * | 多重度 | 意味 |
    | :- | :- |
    | 1 | 1のみ |
    | * | 0以上 | 
    | 0..* | 0以上 | 
    | 1..* | 1以上 |
    | 5..8 | 5 ~ 8 |
    | 1,3,5 | 1 or 3 or 5 |
    |1,4..7 | 1 or 4 ~ 7 |

  * 下記の図は「1つの部署に対して社員が1人以上所属する」ことを表現する。

    ![class_4](src/class_4.png)

## 関連端名

  * 関連のあるクラス間において、一方からもう一方のクラスを見たときの役割を関連端名として表す。

  * 下記の図は「社員」と「部署」で「所属する」という関連があり、社員から部署を見れば、「所属部署」となり、部署から社員を見れば「所属部員」となる。
  
    ![class_5](src/class_5.png)


## 限定子

  * 限定子は関連の一種で、1対多の関係があるクラス間において、一方のクラスのインスタンスがもう一方のインスタンスを特定する際、どの属性を用いるかを表したもの。

  * 社員と部署が1対多の関係であるとき、部署クラスの「社員ID」属性を限定子とすることで、社員を1人に特定することができる。（社員IDは社員ごとに割り振られる一意のキー）
  
    ![class_6](src/class_6.png)


## 汎化

  * 一方のクラスが、もう一方のクラスをより具体化したクラスである場合のクラス間の関係。汎化は頭に白抜きの三角形がついた実践で表す。

  * 下記の図で「営業社員」と「開発社員」クラスは、「社員」クラスをより具体化したクラスであるため、汎化の関係である。

  * 矢印を指している「社員」（スーパークラス）から見て逆に「営業社員」、「開発社員」クラスを**特化**という
  
    ![class_7](src/class_7.png)
